<div class="min-h-screen bg-gray-50 pt-24 pb-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <!-- ページタイトル -->
    <div class="mb-8 flex items-center justify-between">
      <div>
        <h1 class="text-3xl font-bold text-gray-900">ダッシュボード</h1>
        <p class="mt-2 text-gray-600">本日の売上と注文状況</p>
      </div>
      <%= link_to edit_admin_site_settings_path, class: "inline-flex items-center px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium" do %>
        <i class="fa-solid fa-truck mr-2"></i>
        送料設定
      <% end %>
    </div>

    <!-- 統計カード -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <!-- 本日の売上 -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600 mb-1">本日の売上</p>
            <p class="text-3xl font-bold text-gray-900">
              <%= number_to_currency(@today_total_sales, unit: "¥", strip_insignificant_zeros: true) %>
            </p>
          </div>
          <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center">
            <i class="fa-solid fa-yen-sign text-gray-600 text-xl"></i>
          </div>
        </div>
      </div>

      <!-- 本日の注文数 -->
      <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600 mb-1">本日の注文数</p>
            <p class="text-3xl font-bold text-gray-900">
              <%= @today_total_orders %>件
            </p>
          </div>
          <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center">
            <i class="fa-solid fa-shopping-cart text-gray-600 text-xl"></i>
          </div>
        </div>
      </div>
    </div>

    <!-- 注文ステータスフィルター -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
      <%= form_with url: admin_root_path, method: :get, local: true, class: "flex items-center gap-4" do |f| %>
        <label class="text-sm font-medium text-gray-700">注文ステータス:</label>
        <%= f.select :status, options_for_select(Order.statuses.keys.to_a.map { |s| [s, s] }, @selected), { prompt: "すべて" }, {class: "bg-white border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 px-4 py-2"} %>
        <%= f.submit "検索", class: "px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium cursor-pointer" %>
      <% end %>
    </div>

    <!-- 注文一覧テーブル -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
      <div class="px-6 py-4 border-b border-gray-200">
        <h2 class="text-lg font-semibold text-gray-900">注文一覧</h2>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">顧客メール</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">請求金額</th>
              <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">ステータス</th>
              <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">注文日時</th>
              <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% @orders.each do |order| %>
              <tr class="hover:bg-gray-50 transition-colors">
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900"><%= order.display_email %></div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900">
                    <%= number_to_currency(order.billing_amount, unit: "¥", strip_insignificant_zeros: true) %>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-center">
                  <span class="px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">
                    <%= order.status %>
                  </span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-center">
                  <div class="text-sm text-gray-500"><%= l order.created_at, format: :short %></div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right">
                  <%= link_to admin_order_path(order), class: "text-sm text-gray-600 hover:text-gray-900 font-medium" do %>
                    詳細
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
