<div class="w-full h-[64vw] max-h-[272px]">
  <div class="swiper heroSwiper h-full">
    <div class="swiper-wrapper">
      <div class="swiper-slide" style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3');"></div>
      <div class="swiper-slide" style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?ixlib=rb-4.0.3');"></div>
      <div class="swiper-slide" style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1593560708920-61dd98c46a4e?ixlib=rb-4.0.3');"></div>
    </div>
  </div>
</div>
<div class="px-4 py-4 max-w-[425px] mx-auto">
  <div class="mb-4 text-center">
    <span class="text-3xl font-bold libertinus-serif-bold">
      Menu
    </span>
  </div>
  <div class="flex flex-wrap gap-2 mb-2 justify-center">
    <% Category.all.each do |category| %>
      <% selected = params[:category_id].to_i == category.id %>
      <%= link_to category.name, products_path(category_id: category.id), class: "px-3 py-1 rounded text-sm " + (selected ? "bg-orange-400 text-white" : "bg-gray-200 text-gray-700 hover:bg-indigo-200") %>
    <% end %>
  </div>
  <div class="flex justify-center">
    <div class="mb-3 w-fit px-4 py-1.5 rounded text-sm <%= @sort === "latest" ? "font-bold" : "" %>">
      <%= link_to '新着順', products_path({latest: true, category_id: params[:category_id]}.compact) %>
    </div>
    <div class="border-l mb-3 w-fit px-4 py-1.5 rounded text-sm <%= @sort === "price_high_to_low" ? "font-bold" : "" %>">
      <%= link_to '価格が高い順', products_path({price_high_to_low: true, category_id: params[:category_id]}.compact) %>
    </div>
    <div class="border-l mb-3 w-fit px-4 py-1.5 rounded text-sm <%= @sort === "price_low_to_high" ? "font-bold" : "" %>">
      <%= link_to '価格が安い順', products_path({price_low_to_high: true, category_id: params[:category_id]}.compact) %>
    </div>
  </div>
  <div class='flex flex-wrap justify-between'>
    <% @products.each do |product| %>
      <div class="rounded-lg w-[44vw] max-w-[187px]">
        <%= link_to product_path(product) do %>
          <div class="w-full h-[30.933vw] overflow-hidden max-h-[131px]">
            <%= image_tag product.image, class: "object-cover w-full h-full" %>
          </div>
          <div class="py-2 pb-4">
            <p class="tracking-tight  mb-1"><%= product.name %></p>
            <div class="flex justify-between items-center">
              <span class="text-sm "><%= number_to_currency(product.price, unit: "¥", strip_insignificant_zeros: true) %></span>
              <% if product.stock > 0 %>
                <span class="bg-blue-100 text-blue-800 text-xs p-1 rounded">在庫あり</span>
              <% else %>
                <span class="bg-red-100 text-red-800 text-xs p-1 rounded">sold out</span>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
  const swiper = new Swiper('.heroSwiper', {
    effect: 'fade',
    fadeEffect: {
        crossFade: true
    },
    autoplay: {
        delay: 5000,
        disableOnInteraction: false,
    },
    loop: true,
    speed: 1000,
  });
</script>